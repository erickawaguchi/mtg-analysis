CREATE TYPE format AS ENUM (
    'standard',
    'modern',
    'legacy'
);

CREATE TABLE tournament_info (
    name TEXT,
    format FORMAT,
    date DATE,
    url TEXT,
    PRIMARY KEY (name, date)
);

CREATE TABLE tournament_entry (
    tournament TEXT,
    date DATE,
    archetype TEXT,
    place TEXT,
    name TEXT,
    player TEXT,
    url TEXT,
    PRIMARY KEY (tournament, date, archetype, place, player),
    FOREIGN KEY (tournament, date) REFERENCES tournament_info (name, date)
);

CREATE TABLE EntryCard (
    tournament TEXT,
    date DATE,
    archetype TEXT,
    place TEXT,
    player TEXT,
    card TEXT,
    quantity INTEGER,
    mainboard BOOLEAN,
    PRIMARY KEY (tournament, date, archetype, place, card, mainboard),
    FOREIGN KEY (tournament, date) REFERENCES tournament_info(name, date),
    FOREIGN KEY (tournament, date, archetype, place, player) REFERENCES tournament_entry(tournament, date, archetype, place, player)
);

